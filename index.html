<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>绿地-空气质量在线监测平台</title>
    <link href="./css/style.css" rel="stylesheet" type="text/css" />
	  <script type="text/javascript">
    	
   		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
   			
   		});
    </script>
</head>
<body>
  <div class="login-wrapper">
    <div class="login-title">空气质量检测平台</div>
    <div class="login-content">
      <div class="serial-number">
        <p>室内设备编号</p >
        <input type="number" name="in_val" id="in_val" required placeholder="请输入编号" />
      </div>
      <div class="serial-number">
        <p>电梯厅设备编号</p >
        <input type="number" name="elev_val" id="elev_val" required placeholder="请输入编号" />
      </div>
      <div class="login-btn">确定</div>
    </div>
  </div>
	<div class="wrapper flex" id="app">
    <div class="content-top">
      <div class="logo"><img src="./img/logo.png" alt=""></div>
      <div class="content-left" id="video-box">
		  <div class="date-box">
			  <p>日期：<i class="date-cn"></i></p>
			  <p>Date：<i class="date-en"></i></p>
		  </div>
          <video width="100%" loop autoplay="autoplay" controls id="video">
            <source src="./img/GL_Video_2.mp4" type="video/mp4">
            Your browser does not support HTML5 video.
          </video>
		  <div class="tip-box">
			  <p>温馨提示:<br />Tips:</p>
			  <img src="./img/tips.png" />
		  </div>
      </div>
    </div>
    <div class="content">
      <div class="name">
        <img src="./img/group.png" alt="">
      </div>
      <div class="content-right">
        <ul class="list">
          <li class="item">
            <div class="title">
              <span class="title-cn">室  内</span>
              <span class="title-en">Indoor</span>
            </div>
            <span class="num" id="in-status">25</span>
            <div class="info">
                <p class="info-data flex">
                  <span>TEMP</span>
                  <span ><em id="inTemp">24</em><i >&nbsp;℃</i> / <em id="inFah">39</em><i>&nbsp;℉</i></span>
                </p>
                <p class="info-data flex">
                  <span>RH%</span>
                  <span><em id="inHud">40</em><i>&nbsp;%</i></span>
                </p>
                <p class="info-data flex">
                  <span>CO<sub>2</sub></span>
                  <span><em id="inCo2">77</em><i>&nbsp;ppm</i></span>
                </p>
                <p class="info-data flex">
                  <span>TVOC</span>
                  <span><em id="inTvoc">56</em><i>&nbsp;ppm</i></span>
                </p>
            </div>
          </li>
          <li class="item">
            <div class="title">
              <span class="title-cn">电 梯 厅</span>
              <span class="title-en">Elevator Hall</span>
            </div>
            <span class="num" id="elev-status">27</span>
            <div class="info">
              <p class="info-data flex">
                <span>TEMP</span>
                <span ><em id="elevTemp">24</em><i >&nbsp;℃</i> / <em id="elevFah">39</em><i>&nbsp;℉</i></span>
              </p>
              <p class="info-data flex">
                <span>RH%</span>
                <span><em id="elevHud">40</em><i>&nbsp;%</i></span>
              </p>
              <p class="info-data flex">
                <span>CO<sub>2</sub></span>
                <span><em id="elevCo2">77</em><i>&nbsp;ppm</i></span>
              </p>
              <p class="info-data flex">
                <span>TVOC</span>
                <span><em id="elevTvoc">56</em><i>&nbsp;ppm</i></span>
              </p>
            </div>
          </li>
          <li class="item">
            <div class="title">
              <span class="title-cn">室   外</span>
              <span class="title-en">Outdoor</span>
            </div>
            <span class="num out-pm" id="out-status" >25</span>
            <div class="info">
              <p class="info-data flex">
                <span>TEMP</span>
                <span ><em id="outTemp">24</em><i >&nbsp;℃</i> / <em id="outFah">39</em><i>&nbsp;℉</i></span>
              </p>
              <p class="info-data flex">
                <span>RH%</span>
                <span><em id="outHud">40</em><i>&nbsp;%</i></span>
              </p>
              <p class="info-data flex">
                <span>PM2.5</span>
                <span><em id="outPmC">1</em><i>&nbsp;μg/m³</i></span>
              </p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script src='./js/jquery-3.4.1.min.js'></script>
  <script src='./js/index.js'></script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    const WEATHER_URL = "http://aliv8.data.moji.com/whapi/json/aliweather/"
    const AXIOS_HEADERS = {
      "Authorization": "APPCODE 4d283daf5f35494ca99e0854f9974952",
      "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
      "Accept": "application/json",
      "X-Ca-Request-Mode": "debug",
      "X-Ca-Key": "25644678" 
    }
    const PARAMS = {
      "lat": "31.202777",
      "lon": "121.486655"
    }

    const vm = new Vue({
      el: '#app',
      data: {
        statusLevel: '',
        videoUrl: '',
		date_now: new Date(),
        outdoorData: {
          temperature: '',
          humidity: '',
          pm2_5: ''
        }
      },
      mounted() {
		var _this = this
        this.videoUrl = './img/video.mp4'
        this.getAqi()
        this.getCondition()
		setInterval(function() {
			_this.date_now = new Date()
			_this.getCondition()
		}, 5000)
      },
      methods: {
        getAqi() {
          axios({
            url: WEATHER_URL + "aqi",
            method: "post",
            headers: AXIOS_HEADERS,
            params: {...PARAMS, "token": "6e9a127c311094245fc1b2aa6d0a54fd"}
          }).then(res => {
            console.log(res.data.data)
            this.outdoorData.pm2_5 = res.data.data.aqi.pm25

            const AQI = this.outdoorData.pm2_5

            if(AQI >= 0 && AQI <= 35) {
              this.statusLevel = 'status-lv1'
            } else if(AQI > 35 && AQI <= 75) {
              this.statusLevel = 'status-lv2'
            } else if(AQI > 75 && AQI <= 115) {
              this.statusLevel = 'status-lv3'
            } else if(AQI > 115 && AQI <= 150) {
              this.statusLevel = 'status-lv4'
            } else if(AQI > 150 && AQI <= 250) {
              this.statusLevel = 'status-lv5'
            } else if(AQI > 250) {
              this.statusLevel = 'status-lv6'
            }
          })
        },
        getCondition() {
          axios({
            url: WEATHER_URL + "condition",
            method: "post",
            headers: AXIOS_HEADERS,
            params: {...PARAMS, "token": "ff826c205f8f4a59701e64e9e64e01c4"}
          }).then(res => {
            console.log(res.data.data.condition)
            let { temp, humidity} = res.data.data.condition
            this.outdoorData.temperature = Math.round(32 + Number(temp)*1.8)
            this.outdoorData.humidity = humidity
          })
        }
      }
    })
  </script> -->
</body>
</html>